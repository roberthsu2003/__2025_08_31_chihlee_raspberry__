# Feature Specification: 視窗版繁體中文貪食蛇遊戲

**Feature Branch**: `001-`  
**Created**: 2025-10-15  
**Status**: Finalized  
**Input**: User description: "我要建立一個視窗版繁體中文的貪食蛇遊戲"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 核心遊戲流程 (Priority: P1)

玩家可以啟動遊戲，使用方向鍵控制蛇的移動來吃食物、獲得分數，並在蛇死亡時看到遊戲結束畫面。

**Why this priority**: 這是貪食蛇遊戲最核心的玩法，構成了產品的基礎。

**Independent Test**: 可以透過啟動遊戲、玩一局直到遊戲結束來完整測試。此功能交付了可玩的基本遊戲循環。

**Acceptance Scenarios**:

1. **Given** 遊戲在主選單, **When** 玩家按下「開始遊戲」, **Then** 遊戲開始，蛇出現在畫面上。
2. **Given** 遊戲正在進行, **When** 玩家使用方向鍵, **Then** 蛇會對應改變移動方向。
3. **Given** 蛇的頭部碰到食物, **When** 蛇移動到下一格, **Then** 食物消失，蛇的長度增加一節，分數增加。
4. **Given** 蛇的頭部碰到牆壁或自己的身體, **When** 遊戲更新畫面, **Then** 遊戲結束，並顯示「遊戲結束」畫面。

---

### User Story 2 - 遊戲進程與難度 (Priority: P2)

隨著玩家分數的提高，遊戲速度會加快，從而增加遊戲的挑戰性。

**Why this priority**: 難度遞增是吸引玩家持續遊玩和挑戰高分的關鍵機制。

**Independent Test**: 可以透過玩遊戲並持續得分來測試。觀察遊戲速度是否在達到特定分數閾值後明顯提升。

**Acceptance Scenarios**:

1. **Given** 玩家的分數達到一個新的等級門檻, **When** 遊戲下一次更新速度, **Then** 蛇的移動速度比之前更快。

---

### User Story 3 - 玩家紀錄 (Priority: P3)

遊戲開始前，系統會提示玩家輸入姓名。若已輸入，則遊戲結束後不再提示。系統會記錄玩家的姓名和本次分數，並在某處顯示歷史高分。

**Why this priority**: 記錄分數和高分榜能激勵玩家重複遊玩，創造更高的分數。

**Independent Test**: 啟動遊戲，確認在遊戲開始前會提示輸入姓名。輸入姓名後完成一局遊戲，檢查高分是否被記錄。重新啟動遊戲，確認不再提示輸入姓名。

**Acceptance Scenarios**:

1. **Given** 遊戲啟動, **When** 玩家尚未輸入姓名, **Then** 系統提示玩家輸入姓名。
2. **Given** 遊戲啟動, **When** 玩家已輸入姓名, **Then** 系統直接進入遊戲或主選單，不再提示輸入姓名。
3. **Given** 玩家在遊戲結束畫面, **When** 玩家已輸入姓名, **Then** 系統保存玩家的姓名和分數，不再提示輸入姓名。
4. **Given** 遊戲在主選單或結束畫面, **When** 玩家查看高分榜, **Then** 系統顯示獨立的高分榜畫面，包含之前儲存分數的列表。

---

### Edge Cases

- 玩家在遊戲開始前快速連續按下方向鍵。
- 遊戲視窗被縮放或失去焦點。
- 玩家輸入極長或包含特殊字元的姓名 (系統應顯示錯誤訊息，要求玩家重新輸入)。

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 系統必須提供一個固定大小的遊戲視窗。
- **FR-002**: 系統必須在視窗內渲染遊戲場景，包括蛇、食物和牆壁。
- **FR-003**: 系統必須能透過鍵盤方向鍵接收玩家輸入來控制蛇的移動方向。
- **FR-004**: 系統必須實現蛇吃掉食物後身體變長且分數增加的邏輯。
- **FR-005**: 系統必須在蛇撞到邊界或自身時結束遊戲。
- **FR-006**: 遊戲中的所有文字（如分數、等級、選單、結束畫面）都必須以繁體中文顯示。
- **FR-007**: 系統必須提供重新開始遊戲的選項。
- **FR-008**: 系統必須根據分數提升遊戲等級和速度，每得到 10 分，等級提升一級，且每次等級提升，遊戲速度增加固定值 (例如：每級加快 10 毫秒)。
- **FR-009**: 系統必須在遊戲開始前，允許玩家輸入姓名。若已輸入，則遊戲結束後不再提示，並保存玩家的最高分數，使用一個結構化的本機 JSON 檔 (scores.json)。
- **FR-010**: 遊戲結束畫面必須只提供「重新開始」和「離開遊戲」選項。

### Key Entities *(include if feature involves data)*

- **玩家 (Player)**: 代表遊戲使用者。屬性包含 `姓名 (Name)` 和 `最高分 (High Score)` (該玩家的單一最高分數)。
- **遊戲狀態 (Game State)**: 代表一局遊戲的即時狀態。屬性包含 `目前分數 (Current Score)`、`等級 (Level)`、`蛇的狀態 (Snake)`、`食物位置 (Food Position)`。

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 玩家可以在5分鐘內無障礙地完成一局從開始到遊戲結束的完整流程。
- **SC-002**: 遊戲在主流硬體上運行時，畫面更新率應穩定在 30 FPS 以上，無肉眼可見的卡頓。
- **SC-003**: 95% 的玩家在第一次嘗試時能成功理解如何控制蛇和進行遊戲。
- **SC-004**: 玩家的分數和姓名記錄功能必須 100% 可靠，不會無故遺失。

## Clarifications



### Session 2025-10-15



- Q: 玩家姓名輸入的主要使用者體驗是什麼？ → A: 遊戲開始前輸入一次，若已輸入則遊戲結束後不再提示。

- Q: 當玩家提交新分數且其姓名已存在於 `scores.json` 中時，應如何處理其先前的分數紀錄？ → A: 只保留該玩家姓名的最高分數，捨棄較低分數。

- Q: 遊戲結束畫面除了「重新開始」和「離開遊戲」選項外，是否允許返回主選單？ → A: 不允許，嚴格遵守 FR-010，只提供「重新開始」和「離開遊戲」。

- Q: 歷史高分應在何處顯示？ → A: 獨立的高分榜畫面。

- Q: 當玩家輸入極長或包含特殊字元的姓名時，系統應如何處理？ → A: 顯示錯誤訊息，要求玩家重新輸入。



- Q: 遊戲時,必需要顯示使用者名稱和最高紀錄 中的「最高紀錄」是指什麼？ → A: 顯示當前玩家的個人最高分數 (personal best)。

- Q: 遊戲過程中,如果使用者超過自已最高紀錄,必需提示。此「提示」應如何呈現？ → A: 視覺提示 (例如：短暫的文字訊息、閃爍效果)。

- Q: 對於遊戲的運行，是否需要任何形式的日誌記錄或監控？ → A: 僅記錄關鍵錯誤。

- Q: 遊戲是否需要考慮任何安全或隱私方面的特殊要求？ → A: 無特殊要求。

- Q: 遊戲速度提升的具體機制是什麼？ → A: 每次等級提升，遊戲速度增加固定值 (例如：每級加快 10 毫秒)。






